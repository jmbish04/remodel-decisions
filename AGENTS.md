Agent Instructions & Repository Standards1. Context & ObjectiveThis repository hosts the Renovation Checklist application. The system is designed to provide a robust, persistent state for tracking home renovation tasks across multiple floors and categories.Primary Goal: Maintain a serverless backend on Cloudflare Workers that serves a React frontend. The backend must be fully typed, self-documenting (OpenAPI), and use D1 for persistence.2. Tech Stack ReferenceRuntime: Cloudflare WorkersFramework: Hono (specifically OpenAPIHono)Database: Cloudflare D1 (SQLite)ORM: Drizzle ORMValidation: Zod + @hono/zod-openapiDocumentation: Swagger UI (served dynamically)3. Architecture RulesA. Database Schema (Drizzle)Source of Truth: src/db/schema.tsPrimary Keys:areas: Text ID (e.g., floor1_general) for static structural control.categories: Auto-increment Integer.items: Text ID (e.g., f1_1) for initial seed items; UUID for user-created items.Relations: Always define relations in schema.ts to enable nested queries (with: { ... }) in Drizzle.B. API Route StandardsDefinition: Use createRoute() from @hono/zod-openapi for all endpoints.Operation IDs: MANDATORY. Every route must have a unique operationId in camelCase (e.g., updateItemStatus, createCategory). This enables client-SDK generation.Validation:Inputs: Strict Zod schemas.Outputs: Strict Zod schemas for 200 OK responses.Path: All API routes must be prefixed with /api.Docs: Serve OpenAPI v3.1.0 JSON at /openapi.json and UI at /swagger.C. Seed DataThe application relies on a complex initial state (Renovation Checklist V10).Seed File: init_seed.sqlWorkflow: If the default checklist structure changes, update init_seed.sql and re-execute against the D1 database. Do not hardcode initial data in TypeScript; load it into D1.4. Development Workflow for AgentsAdding a New RouteDefine Schema: Create Request/Response Zod schemas.Config Route: Use createRoute with method, path, and operationId.Implement Handler: Use app.openapi(route, handler).Database Access: Initialize drizzle(c.env.DB) inside the handler.Modifying SchemaEdit src/db/schema.ts.Run npx drizzle-kit generate to create migration files.(Local) Run npx wrangler d1 migrations execute <DB_NAME> --local.(Prod) Run npx wrangler d1 migrations execute <DB_NAME> --remote.5. Directory Structure Convention/
├── src/
│   ├── db/
│   │   ├── schema.ts       # Drizzle Table Definitions
│   │   └── index.ts        # DB Connection Logic
│   ├── routes/             # Route definitions (optional grouping)
│   └── index.ts            # Hono Entrypoint & OpenAPI Configuration
├── drizzle/                # SQL Migrations
├── init_seed.sql           # Initial Checklist Data
├── wrangler.toml           # Cloudflare Config
└── package.json

